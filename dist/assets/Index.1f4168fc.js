import{r as _,i as b,c as D,w as u,a as m,o as s,b as c,d as v,e as n,f as k,F as x,g as r,v as y,h as e,t as i,j as V,x as U,bs as w,bp as W}from"./index.06ac923f.js";import{_ as X}from"./list.0aed7209.js";const Y=e("h2",null,"\u96A7\u9053\u76F8\u5173",-1),Z=e("p",null,[e("a",{href:"https://forum.laecloud.com/d/5-ying-she-ji-chu-jiao-xue-ji-chu-zhong-de-ji-chu-chu-xue-zhe-xian-ding",target:"_blank"},"\u5982\u679C\u60A8\u662F\u7B2C\u4E00\u6B21\u4F7F\u7528\uFF0C\u8BF7\u52A1\u5FC5\u770B\u8FD9\u91CC\u3002")],-1),q={class:"mt-3"},ee={class:"btn-group",role:"group","aria-label":"\u521B\u5EFA\u6216\u6574\u5408\u96A7\u9053\u914D\u7F6E\u6587\u4EF6"},te={class:"list-group mt-3"},oe={class:"d-flex w-100 justify-content-between"},ae={class:"mb-1 text-success"},le={class:"mb-1"},se={key:0,"data-bs-toggle":"tooltip","data-bs-placement":"right",title:"\u6309\u4F4F Shift \u6216 Ctrl \u6765\u6253\u5F00"},ne=["href"],re=e("i",{class:"bi bi-box-arrow-up-right text-decoration-none"},null,-1),ie={key:1},de={rel:"noreferrer",target:"_blank",class:"text-decoration-none"},ue={class:"modal fade",id:"createTunnelModel",tabindex:"-1","aria-labelledby":"createTunnelModel","aria-hidden":"true"},ce={class:"modal-dialog"},_e={class:"modal-content"},pe={class:"modal-header"},ve=e("h5",{class:"modal-title"},"\u65B0\u5EFA\u96A7\u9053",-1),me={class:"modal-body"},fe={class:"form-floating mb-3"},he=e("label",{for:"floatingName"},"\u96A7\u9053\u540D\u79F0",-1),ge={class:"form-floating mb-3"},be=e("label",{for:"floatingName"},"\u672C\u5730 \u5730\u5740\u548C\u7AEF\u53E3",-1),xe={class:"form-floating mb-3"},ye=e("option",{value:"http"},"HTTP",-1),ke=e("option",{value:"https"},"HTTPS",-1),we=e("option",{value:"tcp"},"TCP",-1),Ce=e("option",{value:"udp"},"UDP",-1),Se=[ye,ke,we,Ce],Te=e("label",{for:"floatingProtocol"},"\u534F\u8BAE",-1),Pe={class:"form-floating mb-3"},Ve=["value"],Ue=e("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 TCP \u534F\u8BAE\u7684\u8282\u70B9(\u56FD\u5185\u670D\u52A1\u5668\u4E25\u7981 TCP \u5EFA\u7AD9)",-1),Me={class:"form-floating mb-3"},Ne=["value"],je=e("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 HTTP \u534F\u8BAE\u7684\u8282\u70B9",-1),De={class:"form-floating mb-3"},He=["value"],Be=e("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 HTTPS \u534F\u8BAE\u7684\u8282\u70B9",-1),Ee={class:"form-floating mb-3"},Fe=["value"],ze=e("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 UDP \u534F\u8BAE\u7684\u8282\u70B9",-1),Ge={class:"form-floating mb-3"},$e=e("label",{for:"floatingDomain"},"\u7ED1\u5B9A\u57DF\u540D",-1),Ae={class:"form-check"},Le=e("label",{class:"form-check-label",for:"createHttps"}," \u540C\u65F6\u521B\u5EFA HTTP(s) \u96A7\u9053 ",-1),Re={class:"form-floating mb-3"},Ie=e("label",{for:"floatingPort"},"\u8FDC\u7A0B\u7AEF\u53E3",-1),Je={key:0},Ke={key:0,class:"text-danger ms-1"},Oe={class:"d-none"},Qe=["textContent"],We={key:2},Xe=e("h3",null,"\u670D\u52A1\u5668\u4FE1\u606F",-1),Ye={key:0},Ze={key:1},qe=e("p",null,[v(" \u5982\u679C\u60A8\u7EE7\u7EED\uFF0C\u5219\u4EE3\u8868\u540C\u610F\u4E86\u6211\u4EEC\u7684"),e("a",{target:"_blank",href:"https://forum.laecloud.com/d/6-jing-yuan-ying-she-shi-yong-tiao-kuan"},"\u4F7F\u7528\u6761\u6B3E")],-1),et={class:"modal-footer"},tt={data:()=>({drawer:null})},st=Object.assign(tt,{__name:"Index",setup(ot){const M=_([]),C=_([]),h=_([]),H=_([]),B=_([]),E=_([]),F=_([]),N=_(!1),S=_(!1);_({});const d=_({name:null}),t=_({name:null,protocol:"http",local_address:"127.0.0.1:80",server_id:1,remote_port:null,custom_domain:null,create_https:!0,create_cdn:!1});function z(l){l=l||32;for(var o="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",f=o.length,g="",T=0;T<l;T++)g+=o.charAt(Math.floor(Math.random()*f));return g}t.value.name=z(10),b.get("/modules/frp/hosts").then(l=>{C.value=l.data}),b.get("/modules/frp/traffics").then(l=>{M.value=l.data});function $(){b.get("/modules/frp/servers").then(l=>{N.value=!1,h.value=l.data,t.server_id=h.value[0].id,H.value=h.value.filter(o=>o.allow_http==1),B.value=h.value.filter(o=>o.allow_https==1),E.value=h.value.filter(o=>o.allow_tcp==1),F.value=h.value.filter(o=>o.allow_udp==1)})}function A(){t.value.name=z(10)}function L(l){d.value=h.value.find(o=>o.id==l)}function G(){var g;const l=(g=t.value.remote_port)!=null?g:0,o=d.value.min_port,f=d.value.max_port;(l<o||l>f)&&(t.value.remote_port=Math.floor(Math.random()*(f-o+1)+o))}function R(){b.post("/modules/frp/hosts",t.value).then(l=>{(t.value.protocol=="https"||t.value.protocol=="http")&&(t.value.create_https&&(t.value.protocol=="http"?t.value.protocol="https":t.value.protocol=="https"&&(t.value.protocol="http")),t.value.name+=" - "+t.value.protocol,b.post("/modules/frp/hosts",t.value).then(o=>{b.get("/modules/frp/hosts").then(f=>{C.value=f.data})})),l.status==200||l.status==201?(b.get("/modules/frp/hosts").then(o=>{C.value=o.data}),N.value=!0):S.value=l.message}).catch((l,o)=>{S.value="\u65E0\u6CD5\u521B\u5EFA\u96A7\u9053\uFF0C\u53EF\u80FD\u662F\u8868\u5355\u6CA1\u6709\u586B\u5199\u5B8C\u6574\uFF0C\u6216\u8005\u670D\u52A1\u5668\u4E0D\u63A5\u53D7\u6B64\u7AEF\u53E3\uFF08\u7AEF\u53E3\u88AB\u5360\u7528\u6216\u8005\u4E0D\u5728\u8303\u56F4\u5185\uFF09"})}return(l,o)=>{const f=m("v-app-bar-nav-icon"),g=m("v-toolbar-title"),T=m("v-app-bar"),I=m("v-navigation-drawer"),P=m("v-btn"),J=m("router-link"),K=m("v-container"),O=m("v-main"),j=m("v-alert"),Q=m("v-app");return s(),D(Q,{id:"inspire"},{default:u(()=>[c(T,null,{default:u(()=>[c(f,{onClick:o[0]||(o[0]=a=>l.drawer=!l.drawer)}),c(g,null,{default:u(()=>[v("MirrorEdge Frp \u63A7\u5236\u9762\u677F")]),_:1})]),_:1}),c(I,{modelValue:l.drawer,"onUpdate:modelValue":o[1]||(o[1]=a=>l.drawer=a),"expand-on-hover":"",rail:"",permanent:""},{default:u(()=>[c(X)]),_:1},8,["modelValue"]),c(O,null,{default:u(()=>[c(K,null,{default:u(()=>[(s(),n(x,null,k(1,a=>(s(),n(x,{key:a},[Y,Z,r(e("p",null," \u60A8\u5F53\u524D\u7684\u53EF\u62B5\u7528\u6D41\u91CF: "+i(M.value.free_traffic)+" GB ",513),[[y,M.value.free_traffic]]),e("div",q,[e("div",ee,[c(P,{type:"button",class:"btn btn-outline-primary","data-bs-toggle":"modal","data-bs-target":"#createTunnelModel",onClick:o[2]||(o[2]=function(){$(),A()})},{default:u(()=>[v(" \u521B\u5EFA\u96A7\u9053 ")]),_:1})])]),(s(!0),n(x,null,k(C.value,p=>(s(),n("div",te,[c(J,{to:{name:"modules.tunnels.show",params:{id:p.id}},class:"list-group-item list-group-item-action shadow-sm rounded"},{default:u(()=>[e("div",oe,[e("h5",ae,i(p.name),1),e("small",null,i(new Date(p.updated_at).toLocaleString()),1)]),e("p",le,[p.protocol=="http"||p.protocol=="https"?(s(),n("span",se,[v("\u96A7\u9053\u5730\u5740: "),e("a",{rel:"noreferrer",target:"_blank",href:p.protocol+"://"+p.custom_domain,class:"text-decoration-none"},[v(i(p.protocol+"://"+p.custom_domain)+" ",1),re],8,ne)])):(s(),n("span",ie,[v("\u96A7\u9053\u5730\u5740:"),e("a",de,i(p.server.server_address+":"+p.remote_port),1)]))])]),_:2},1032,["to"])]))),256))],64))),64))]),_:1})]),_:1}),e("div",ue,[e("div",ce,[e("div",_e,[e("div",pe,[ve,c(P,{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),e("div",me,[N.value?(s(),D(j,{key:0,type:"success",class:"alert alert-success",role:"alert"},{default:u(()=>[v(" \u96A7\u9053\u521B\u5EFA\u6210\u529F\u3002 ")]),_:1})):S.value?(s(),D(j,{key:1,type:"error",class:"alert alert-danger",role:"alert"},{default:u(()=>[v(i(S.value),1)]),_:1})):V("",!0),c(j,{type:"info"},{default:u(()=>[v(" \u4E3A\u4E86\u9632\u6B62\u96A7\u9053\u88AB\u6EE5\u7528\uFF0C\u6211\u4EEC\u4F1A\u4E0D\u5B9A\u671F\u68C0\u67E5\u6620\u5C04\u5185\u5BB9\u3002 ")]),_:1}),e("div",fe,[r(e("input",{class:"form-control",id:"floatingName",placeholder:"xxx","onUpdate:modelValue":o[3]||(o[3]=a=>t.value.name=a)},null,512),[[U,t.value.name]]),he]),e("div",ge,[r(e("input",{class:"form-control",id:"floatingName",placeholder:"xxx","onUpdate:modelValue":o[4]||(o[4]=a=>t.value.local_address=a)},null,512),[[U,t.value.local_address]]),be]),e("div",xe,[r(e("select",{class:"form-control",id:"floatingProtocol","onUpdate:modelValue":o[5]||(o[5]=a=>t.value.protocol=a)},Se,512),[[w,t.value.protocol]]),Te]),r(e("div",Pe,[r(e("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":o[6]||(o[6]=a=>t.value.server_id=a),onChange:G},[(s(!0),n(x,null,k(E.value,a=>(s(),n("option",{value:a.id},i(a.name),9,Ve))),256))],544),[[w,t.value.server_id]]),Ue],512),[[y,t.value.protocol=="tcp"]]),r(e("div",Me,[r(e("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":o[7]||(o[7]=a=>t.value.server_id=a)},[(s(!0),n(x,null,k(H.value,a=>(s(),n("option",{value:a.id},i(a.name),9,Ne))),256))],512),[[w,t.value.server_id]]),je],512),[[y,t.value.protocol=="http"]]),r(e("div",De,[r(e("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":o[8]||(o[8]=a=>t.value.server_id=a)},[(s(!0),n(x,null,k(B.value,a=>(s(),n("option",{value:a.id},i(a.name),9,He))),256))],512),[[w,t.value.server_id]]),Be],512),[[y,t.value.protocol=="https"]]),r(e("div",Ee,[r(e("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":o[9]||(o[9]=a=>t.value.server_id=a),onChange:G},[(s(!0),n(x,null,k(F.value,a=>(s(),n("option",{value:a.id},i(a.name),9,Fe))),256))],544),[[w,t.value.server_id]]),ze],512),[[y,t.value.protocol=="udp"]]),r(e("div",null,[e("div",Ge,[r(e("input",{class:"form-control",id:"floatingDomain",placeholder:"xxx","onUpdate:modelValue":o[10]||(o[10]=a=>t.value.custom_domain=a)},null,512),[[U,t.value.custom_domain]]),$e]),e("div",Ae,[r(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[11]||(o[11]=a=>t.value.create_https=a),id:"createHttps"},null,512),[[W,t.value.create_https]]),Le])],512),[[y,t.value.protocol=="http"||t.value.protocol=="https"]]),r(e("div",Re,[r(e("input",{class:"form-control",id:"floatingPort",placeholder:"xxx","onUpdate:modelValue":o[12]||(o[12]=a=>t.value.remote_port=a)},null,512),[[U,t.value.remote_port]]),Ie,d.value?(s(),n("div",Je,[t.value.remote_port<d.value.min_port||t.value.remote_port>d.value.max_port?(s(),n("div",Ke," \u5F53\u524D\u7AEF\u53E3\u8303\u56F4\u4E0D\u6B63\u786E\u3002 ")):V("",!0)])):V("",!0)],512),[[y,t.value.protocol=="tcp"||t.value.protocol=="udp"]]),e("span",Oe,[e("span",{textContent:i(L(t.value.server_id))},null,8,Qe)]),d.value?(s(),n("div",We,[Xe,e("p",null,"\u540D\u79F0: "+i(d.value.name),1),e("p",null," \u7AEF\u53E3\u8303\u56F4: "+i(d.value.min_port)+" - "+i(d.value.max_port),1),e("p",null," \u96A7\u9053\u6570\u91CF: "+i(d.value.tunnels)+"/"+i(d.value.max_tunnels),1),d.value.price_per_gb!==0?(s(),n("p",Ye," \u6B64\u8282\u70B9\u4E3A\u6536\u8D39\u8282\u70B9, \u6BCF GB \u6D41\u91CF\u4EF7\u683C\u4E3A "+i(d.value.price_per_gb)+" \u5143 ",1)):(s(),n("p",Ze,"\u6B64\u8282\u70B9\u76EE\u524D\u4E0D\u6536\u53D6\u8D39\u7528"))])):V("",!0),qe]),e("div",et,[c(P,{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},{default:u(()=>[v(" \u53D6\u6D88 ")]),_:1}),c(P,{type:"button",class:"btn btn-primary",onClick:R},{default:u(()=>[v(" \u521B\u5EFA ")]),_:1})])])])])]),_:1})}}});export{st as default};
