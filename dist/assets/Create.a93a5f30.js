import{r as d,i as g,e as c,h as t,g as u,x as v,bs as x,F as f,f as C,d as l,t as o,bp as w,v as T,l as D,o as r}from"./index.e27b5069.js";const F=t("p",null,"\u9996\u5148\uFF0C\u8BF7\u5728\u8FD9\u91CC\u7ED9\u60A8\u7684\u670D\u52A1\u5668\u8D77\u4E00\u4E2A\u540D\u5B57\u3002",-1),G=t("h4",{class:"mt-5"},"\u4E4B\u540E\uFF0C\u60A8\u60F3\u5C06\u670D\u52A1\u5668\u521B\u5EFA\u5728\u54EA\u91CC\uFF1F",-1),L=["value"],N=["textContent"],P={class:"mt-3"},A=t("h4",{class:"mt-5"},"\u60A8\u60F3\u8981\u591A\u5C11\u4E2A CPU \u6838\u5FC3\uFF1F",-1),j=["textContent"],z=["textContent"],H={class:"mt-3"},J=t("h4",{class:"mt-5"},"\u60A8\u60F3\u8981\u591A\u5927\u5185\u5B58\uFF1F",-1),K=["textContent"],Q=["textContent"],R={class:"mt-3"},W=t("h4",{class:"mt-5"},"\u60A8\u9700\u8981\u591A\u5927\u7684\u78C1\u76D8\uFF1F",-1),X=["textContent"],Y=["textContent"],Z={class:"mt-3"},q=t("h4",{class:"mt-5"},"\u9700\u8981\u5907\u4EFD\u5417\uFF1F",-1),I=["textContent"],O=["textContent"],tt={class:"mt-3"},et=t("h4",{class:"mt-5"},"\u60A8\u9700\u8981\u591A\u5C11\u7AEF\u53E3\uFF1F",-1),st=["textContent"],nt=["textContent"],at={class:"mt-3"},lt=t("h4",{class:"mt-5"},"\u60A8\u9700\u8981\u6570\u636E\u5E93\u5417\uFF1F",-1),ot={class:"form-check"},ut={class:"form-check-label",for:"c-databases"},it=["textContent"],dt={class:"mt-4"},ct=t("h4",null,"\u60A8\u60F3\u8981\u5F00\u4EC0\u4E48\u670D\u52A1\u5668\uFF1F",-1),rt={class:"row"},vt={class:"col"},mt=["value"],_t={class:"col"},pt=["value"],ht=["textContent"],gt=["textContent"],xt={class:"mt-3"},ft=["disabled"],kt={__name:"Create",setup(Ct){const e=d({name:"",cpu_limit:100,memory:1024,disk:1024,databases:!1,allocations:1,backups:1}),_=d({}),p=d({}),h=d({}),m=d(0),b=d({}),k=d({}),i=d({});function y(){p.value.forEach(a=>{a.id==m.value&&(k.value=a,h.value=a.eggs,e.value.egg_id=a.eggs[0].egg_id,V())})}function V(){h.value.forEach(a=>{a.egg_id==e.value.egg_id&&(b.value=a)})}g.get("/modules/gct/locations").then(a=>{_.value=a.data,e.value.location_id=a.data[0].id,i.value=a.data[0]}),g.get("/modules/gct/nests").then(a=>{p.value=a.data,m.value=a.data[0].id,y()});const U=d(!1);function M(){let a=e.value;if(a.name==""){alert("\u8BF7\u8F93\u5165\u670D\u52A1\u5668\u540D\u79F0");return}e.value.databases?a.databases=1:a.databases=0,U.value=!0,g.post("/modules/gct/hosts",a).then(n=>{D.push({name:"tasks"})})}function S(){_.value.forEach(a=>{a.id==e.value.location_id&&(i.value=a)})}function $(a){a=a||32;for(var n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",s=n.length,E="",B=0;B<a;B++)E+=n.charAt(Math.floor(Math.random()*s));return E}return e.value.name=$(8),(a,n)=>(r(),c("div",null,[F,t("h3",null,[u(t("input",{class:"editable","onUpdate:modelValue":n[0]||(n[0]=s=>e.value.name=s),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,512),[[v,e.value.name]])]),G,u(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":n[1]||(n[1]=s=>e.value.location_id=s),onChange:n[2]||(n[2]=s=>S())},[(r(!0),c(f,null,C(_.value,s=>(r(),c("option",{value:s.id},o(s.name)+" - (\u670D\u52A1\u5668\u6570\u91CF: "+o(s.servers)+") ",9,L))),256))],544),[[x,e.value.location_id]]),t("p",null,[l("\u6B64\u8282\u70B9\u57FA\u7840\u4EF7\u683C "),t("span",{textContent:o(i.value.price*100)},null,8,N),l(" \u5143")]),t("div",P,[A,u(t("input",{type:"range",class:"form-range",min:"100",max:"800",step:"100","onUpdate:modelValue":n[3]||(n[3]=s=>e.value.cpu_limit=s)},null,512),[[v,e.value.cpu_limit]]),l(" \u5C06\u4F7F\u7528 "),t("span",{textContent:o(e.value.cpu_limit/100)},null,8,j),l(" \u4E2A\u6838\u5FC3\u3002\u4EF7\u683C\u4E3A "),t("span",{textContent:o(e.value.cpu_limit/100*i.value.cpu_price)},null,8,z),l(" \u5143 ")]),t("div",H,[J,u(t("input",{type:"range",class:"form-range",min:"1024",max:"10240",step:"512","onUpdate:modelValue":n[4]||(n[4]=s=>e.value.memory=s)},null,512),[[v,e.value.memory]]),l(" \u5C06\u4F7F\u7528 "),t("span",{textContent:o(e.value.memory/1024)},null,8,K),l(" GB \u5185\u5B58\u3002\u4EF7\u683C\u4E3A "),t("span",{textContent:o(e.value.memory/1024*i.value.memory_price)},null,8,Q),l(" \u5143 ")]),t("div",R,[W,u(t("input",{type:"range",class:"form-range",min:"512",max:"40960",step:"512","onUpdate:modelValue":n[5]||(n[5]=s=>e.value.disk=s)},null,512),[[v,e.value.disk]]),l(" \u5C06\u4F7F\u7528 "),t("span",{textContent:o(e.value.disk/1024)},null,8,X),l(" GB \u78C1\u76D8\u3002\u4EF7\u683C\u4E3A "),t("span",{textContent:o(e.value.disk/1024*i.value.disk_price)},null,8,Y),l(" \u5143 ")]),t("div",Z,[q,u(t("input",{type:"range",class:"form-range",min:"1",max:"20","onUpdate:modelValue":n[6]||(n[6]=s=>e.value.backups=s)},null,512),[[v,e.value.backups]]),l(" \u5C06\u53EF\u4EE5\u521B\u5EFA "),t("span",{textContent:o(e.value.backups)},null,8,I),l(" \u4E2A\u5907\u4EFD\u3002\u4EF7\u683C\u4E3A "),t("span",{textContent:o(e.value.backups*i.value.backup_price)},null,8,O),l(" \u5143 ")]),t("div",tt,[et,u(t("input",{type:"range",class:"form-range",min:"1",max:"5","onUpdate:modelValue":n[7]||(n[7]=s=>e.value.allocations=s)},null,512),[[v,e.value.allocations]]),l(" \u5C06\u5206\u914D "),t("span",{textContent:o(e.value.allocations)},null,8,st),l(" \u4E2A\u7AEF\u53E3\u3002\u4EF7\u683C\u4E3A "),t("span",{textContent:o(e.value.allocations*i.value.allocation_price)},null,8,nt),l(" \u5143 ")]),t("div",at,[lt,t("div",ot,[u(t("input",{class:"form-check-input",type:"checkbox",value:"1",id:"c-databases","onUpdate:modelValue":n[8]||(n[8]=s=>e.value.databases=s)},null,512),[[w,e.value.databases]]),t("label",ut,[l(" \u662F\u7684\uFF0C\u6211\u7528\u7684\u5230\u6570\u636E\u5E93\uFF0C\u6211\u60F3\u8981\u4E00\u4E2A\u3002"),t("span",null,[l("(\u9700\u8981 "),t("span",{textContent:o(i.value.database_price)},null,8,it),l(" \u5143)")])])])]),t("div",dt,[ct,t("div",rt,[t("div",vt,[u(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":n[9]||(n[9]=s=>m.value=s),onChange:n[10]||(n[10]=s=>y())},[(r(!0),c(f,null,C(p.value,s=>(r(),c("option",{value:s.id},o(s.name),9,mt))),256))],544),[[x,m.value]])]),u(t("div",_t,[u(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":n[11]||(n[11]=s=>e.value.egg_id=s),onChange:n[12]||(n[12]=s=>V())},[(r(!0),c(f,null,C(h.value,s=>(r(),c("option",{value:s.egg_id},o(s.name),9,pt))),256))],544),[[x,e.value.egg_id]])],512),[[T,m.value]])]),t("p",{textContent:o(k.value.description)},null,8,ht),t("p",{textContent:o(b.value.description)},null,8,gt)]),t("div",xt,[t("button",{disabled:U.value,class:"btn btn-outline-primary",onClick:n[13]||(n[13]=s=>M())}," \u521B\u5EFA\u670D\u52A1\u5668 ",8,ft)])]))}};export{kt as default};
