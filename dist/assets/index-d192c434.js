import{r as C,o as r,c as _,O as t,P as a,I as e,Q as w,a as p,n as b,R as j,e as c,S as y,F as A,U as Y,V as ee,W as te,X as ae,Y as h,T as oe,Z as se,_ as ne,H as le}from"./@vue-fa1c5c1f.js";import{a as re}from"./axios-c47e0cf1.js";import{p as ie}from"./vue-axios-58a7c26f.js";import{u as g}from"./user-a1f28023.js";import{r as G}from"./router-325b049e.js";import{H as D,i as ue}from"./highlight.js-619f5caa.js";import{u as K,a as q}from"./composables-b6ff6339.js";import{m as x,s as $,a as de,b as M,c as ce}from"./menuOptions-2f8fe5f8.js";import{i as J}from"./http-78f45fb6.js";import{_ as pe}from"./Lottie-739291b6.js";import{N as O,a as V,b as _e,c as me,d as L,e as fe,f as z,g as ve,h as T,i as B,j as P,k as he,l as E,m as F,n as ge,o as ye,p as we,q as ke,r as U,s as I,t as H,u as be,v as Ne,w as xe,x as Ce,y as $e,z as Ie,A as Le,B as ze,C as Se,D as Te,E as Me,F as Pe}from"./naive-ui-24262aab.js";import{c as k}from"./layout-4b72ee2f.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";import{F as He,A as Ae,L as Oe,a as Re,M as De,C as Ve}from"./@vicons-40010984.js";import{P as Be}from"./pusher-js-90c44bbd.js";import{E as Ee}from"./laravel-echo-daca4039.js";import{j as Fe}from"./vooks-16fcc23f.js";/* empty css               */import"./form-data-d2a9677b.js";import"./vuex-3133efbc.js";import"./vue-router-c4b6792e.js";import"./500-07d896ca.js";import"./404-cdb51896.js";import"./lottie-web-94c7854d.js";import"./date-fns-bca8c9b2.js";import"./seemly-4f9c12c5.js";import"./vueuc-ea3f9c0c.js";import"./evtd-b614532e.js";import"./@css-render-43d82e32.js";import"./vdirs-b0483831.js";import"./@juggle-41516555.js";import"./css-render-d3958e6a.js";import"./@emotion-8a8e73f6.js";import"./lodash-es-cabc0acd.js";import"./treemate-25c27bff.js";import"./async-validator-dee29e8b.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function d(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=d(o);fetch(o.href,n)}})();const Ue={key:0},je=p("span",null,"Cluster Ready! 就绪",-1),Ge={__name:"ClusterReady",setup(u){const s=C(!1);return J.get("").then(d=>{d.headers["powered-by"]==="Cluster Ready!"&&(s.value=!0)}),(d,l)=>s.value?(r(),_("div",Ue,[t(e(O),{trigger:"hover"},{trigger:a(()=>[t(pe,{height:50,loop:!1,name:"cluster-ready"})]),default:a(()=>[je]),_:1})])):w("",!0)}};const Z=u=>(Y("data-v-98a61d0b"),u=u(),ee(),u),Ke={class:"text-center"},qe=Z(()=>p("br",null,null,-1)),Je={key:0,class:"mt-5"},We=Z(()=>p("br",null,null,-1)),Ze={key:0},Qe={class:"mt-5"},Xe={class:"mt-5"},Ye={__name:"User",setup(u){const s=b(()=>g.state.user),d=b(()=>400),l=b(()=>k.avatar+s.value.email_md5+"?s=128"),o=C(!1);return(n,i)=>{const m=j("router-link");return r(),_(A,null,[p("div",{class:"menu-item cursor-pointer",onClick:i[0]||(i[0]=v=>o.value=!0)},[t(e(V),{src:e(l),round:"",size:"large"},null,8,["src"])]),t(e(ve),{show:o.value,"onUpdate:show":i[2]||(i[2]=v=>o.value=v),width:e(d),placement:"right"},{default:a(()=>[t(e(_e),{"native-scrollbar":!1,title:e(s).name+" # "+e(s).id,closable:"",onClick:i[1]||(i[1]=v=>o.value=!1)},{default:a(()=>[p("div",Ke,[t(e(V),{size:128,src:e(l),round:""},null,8,["src"]),qe,t(e(me),{class:"all-zero"},{default:a(()=>[c(y(e(s).name)+" # "+y(e(s).id),1)]),_:1})]),p("div",null,[t(e(L),{class:"all-zero"},{default:a(()=>[c("财务")]),_:1}),t(e(fe),{class:"all-zero"},{default:a(()=>[c("余额: "+y(e(s).balance),1)]),_:1}),p("div",null,[c(" 交易记录: "),t(e(z),{href:e(k).auth+"/transactions",target:"_blank"},{default:a(()=>[c("查看")]),_:1},8,["href"])]),p("div",null,[c(" 充值余额: "),t(e(z),{href:e(k).auth+"/balances",target:"_blank"},{default:a(()=>[c("充值")]),_:1},8,["href"])])]),e(s).user_group_id?(r(),_("div",Je,[t(e(L),{class:"all-zero"},{default:a(()=>[c(y(e(s).user_group.name),1)]),_:1}),p("p",null,[c(" 享受 "+y(e(s).user_group.discount)+"% 的折扣 ",1),We,e(s).user_group.exempt?(r(),_("span",Ze," 并且豁免计费 ")):w("",!0)])])):w("",!0),p("div",Qe,[t(e(L),{class:"all-zero"},{default:a(()=>[c("计费项目列表")]),_:1}),t(e(z),null,{default:a(()=>[t(m,{to:{name:"hosts"},class:"link"},{default:a(()=>[c("主机")]),_:1})]),_:1})]),p("div",Xe,[t(e(L),{class:"all-zero"},{default:a(()=>[c("服务与支持")]),_:1}),t(e(z),null,{default:a(()=>[t(m,{to:{name:"work-orders"},class:"link"},{default:a(()=>[c(" 工单列表 ")]),_:1})]),_:1})])]),_:1},8,["title"])]),_:1},8,["show","width"])],64)}}},et=W(Ye,[["__scopeId","data-v-98a61d0b"]]),tt=["textContent"],at=p("div",{class:"mt-3"},null,-1),ot=["textContent"],st={key:0},nt={key:1},lt=["textContent"],rt={key:2},it={__name:"Charge",setup(u){const s=C(!1),d=C("给你随机个～"),l=b(()=>new Date().getDay()===4),o=()=>l.value?"50":(Math.floor(Math.random()*100)+1).toString(),n=C({payment:"wechat",amount:"10"});l.value&&(n.value.amount="",d.value="V 我 50");const i=C("");function m(){n.value.amount===""&&(n.value.amount=o()),J.post("/balances",n.value).then(v=>{i.value=v.data.url,setTimeout(()=>window.open(i.value,"_blank"))}).finally(()=>{n.value.amount=""})}return(v,f)=>(r(),_(A,null,[t(e(O),{trigger:"hover"},{trigger:a(()=>[t(e(T),{component:e(l)?e(He):e(Ae),class:"mr-3 cursor-pointer",size:"30px",onClick:f[0]||(f[0]=N=>s.value=!0)},null,8,["component"])]),default:a(()=>[p("span",{textContent:y(e(l)?"请我吃疯狂星期四":"快速充值")},null,8,tt)]),_:1}),t(e(ye),{show:s.value,"onUpdate:show":f[4]||(f[4]=N=>s.value=N),"negative-text":"等等","positive-text":e(l)?" V 给你":"开冲",preset:"dialog",title:e(l)?"请我吃疯狂星期四":"快速充值",onPositiveClick:m},{default:a(()=>[at,t(e(B),{vertical:""},{default:a(()=>[t(e(P),null,{default:a(()=>[t(e(he),{value:n.value.payment,"onUpdate:value":f[1]||(f[1]=N=>n.value.payment=N),name:"payment_radio_group"},{default:a(()=>[t(e(B),null,{default:a(()=>[t(e(E),{value:"wechat"},{default:a(()=>[t(e(T),{component:e(Oe),class:"relative top-0.5"},null,8,["component"]),p("span",{textContent:y(" "+(e(l)?"V 信支付":"微信支付"))},null,8,ot)]),_:1}),t(e(E),{value:"alipay"},{default:a(()=>[t(e(T),{component:e(Re),class:"relative top-0.5"},null,8,["component"]),c(" 支付宝 ")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),t(e(P),null,{default:a(()=>[t(e(F),null,{default:a(()=>[c("金额")]),_:1}),t(e(ge),{value:n.value.amount,"onUpdate:value":f[2]||(f[2]=N=>n.value.amount=N),placeholder:d.value,onKeydown:f[3]||(f[3]=te(ae(()=>{},["prevent"]),["enter"]))},null,8,["value","placeholder"]),t(e(F),null,{default:a(()=>[c("元")]),_:1})]),_:1}),e(l)?(r(),h(e(P),{key:0},{default:a(()=>[parseInt(n.value.amount)>=1e3?(r(),_("span",st," 撑了撑了～ ")):parseInt(n.value.amount)>=50?(r(),_("span",nt,[c(" 能吃 "),p("span",{textContent:y((parseInt(n.value.amount)/50).toFixed(0))},null,8,lt),c(" 份疯狂星期四 ")])):(r(),_("span",rt," 吃不起疯狂星期四 "))]),_:1})):w("",!0)]),_:1})]),_:1},8,["show","positive-text","title"])],64))}};const ut={class:"menu-item"},dt={style:{overflow:"auto","max-height":"79vh"}},ct={key:1},pt={__name:"Header",setup(u){const s=K(),d=q();return(l,o)=>e(x).top.length?(r(),h(e(H),{key:0,style:{}},{default:a(()=>[t(e(we),{bordered:"",class:"layout-header"},{default:a(()=>[t(e(ke),{cols:"2"},{default:a(()=>[t(e(U),null,{default:a(()=>[p("div",ut,[t(e(I),{options:e(x).menu,value:e($),mode:"horizontal"},null,8,["options","value"])]),e(s)?w("",!0):(r(),h(e(I),{key:0,options:e(x).top,value:e($),mode:"horizontal"},null,8,["options","value"]))]),_:1}),t(e(U),{class:"text-right flex items-center justify-end mr-1.5"},{default:a(()=>[t(Ge),t(it),t(et),e(s)||e(d)?(r(),h(e(O),{key:0,ref:"mobilePopoverRef","display-directive":"show",placement:"bottom-end",style:{padding:"0",width:"288px"},trigger:"click"},{trigger:a(()=>[t(e(T),{size:"20",style:{"margin-left":"12px"}},{default:a(()=>[t(e(De))]),_:1})]),default:a(()=>[p("div",dt,[t(e(I),{indent:18,options:e(x).top,value:e($)},null,8,["options","value"]),t(e(I),{indent:18,options:e(x).left,value:e($)},null,8,["options","value"])])]),_:1},512)):(r(),_("div",ct))]),_:1})]),_:1})]),_:1})]),_:1})):w("",!0)}},_t=W(pt,[["__scopeId","data-v-d2c017fa"]]),mt={__name:"Menu",setup(u){return(s,d)=>(r(),h(e(I),{ref_key:"menuInst",ref:de,"collapsed-icon-size":22,"collapsed-width":64,options:e(x).left,value:e($)},null,8,["options","value"]))}};Be.logToConsole=!1;let Q;function ft(){g.state.token!==null&&G.currentRoute.value.name!=="login"&&(Q=new Ee({broadcaster:"pusher",key:"app-key",wsHost:k.ws_host,wsPort:k.ws_port,wssPort:k.ws_port,forceTLS:!1,encrypted:!0,disableStats:!0,enableLogging:!0,enabledTransports:["ws","wss"],authEndpoint:k.ws_auth_endpoint,auth:{headers:{Accept:"application/json",Authorization:"Bearer "+g.state.token}}}))}ft();const vt=Q,ht={__name:"Notifications",setup(u){const s=be(),d=b(()=>g.state.token),l=b(()=>g.state.user);return d.value&&vt.private(`users.${l.value.id}`).listen(".messages",o=>{console.log(o);let n="";o.data.name?n=o.data.name:o.data.title&&(n=o.data.title);let i=o.data.message??o.data.content??"";if(o.module){let v=o.module.name;n?n=v+" - "+n:n=v}let m={title:n,content:i,duration:5e3,keepAliveOnHover:!0,meta:new Date(o.sent_at).toLocaleString()};switch(o.type){case"success":s.success(m);break;case"info":s.info(m);break;case"warning":s.warning(m);break;case"error":s.error(m);break;default:s.info(m);break}}),(o,n)=>(r(),_("div"))}},gt={__name:"Layout",setup(u){const s=K(),d=q();return(l,o)=>{const n=j("router-view");return r(),_(A,null,[e(g).state.token?(r(),h(_t,{key:0})):w("",!0),t(e(H),{position:e(s)?"static":"absolute",style:ne({top:e(s)?"":"var(--header-height)"}),"has-sider":""},{default:a(()=>[e(g).state.token&&!e(s)&&!e(d)?(r(),h(e(Ne),{key:0,collapsed:e(M).left,"collapsed-width":64,"native-scrollbar":!1,"show-collapsed-content":!1,width:240,bordered:"","collapse-mode":"width","show-trigger":"arrow-circle",onCollapse:o[0]||(o[0]=i=>e(M).left=!0),onExpand:o[1]||(o[1]=i=>e(M).left=!1)},{default:a(()=>[t(mt)]),_:1},8,["collapsed"])):w("",!0),t(e(H),{"native-scrollbar":!1,"content-style":"padding: 24px"},{default:a(()=>[t(n,null,{default:a(({Component:i})=>[t(oe,{mode:"out-in",name:"fade"},{default:a(()=>[(r(),h(se(i)))]),_:2},1024)]),_:1}),t(e(xe))]),_:1})]),_:1},8,["position","style"]),p("div",null,[t(ht)])],64)}}},yt={__name:"App",setup(u){const s=Fe(),d=b(()=>s.value==="dark"?Ce:null);return D.registerLanguage("ini",ue),(l,o)=>(r(),h(e(Pe),{"date-locale":e(Te),hljs:e(D),locale:e(Me),theme:e(d),"preflight-style-disabled":""},{default:a(()=>[t(e($e)),t(e(Se),null,{default:a(()=>[t(e(Ie),null,{default:a(()=>[t(e(Le),{max:3},{default:a(()=>[t(e(ze),null,{default:a(()=>[t(gt)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["date-locale","hljs","locale","theme"]))}};const S=[{id:"tunnels",name:"镜缘映射",route:"modules.tunnels.index",icon:Ve}];for(let u=0;u<S.length;u++)ce("top",S[u].route,S[u].name,S[u].icon);const X=document.createElement("meta");X.name="naive-ui-style";document.head.appendChild(X);const R=le(yt);R.use(g,g);R.use(G,re,ie);R.mount("#app");
