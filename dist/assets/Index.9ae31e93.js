import{r as v,i as b,c as D,w as _,a as f,o as s,b as p,d,e as r,f as k,F as y,g as i,v as x,h as e,t as n,j as T,x as U,bs as P,bp as Y}from"./index.c37d6a9f.js";import{_ as Z}from"./list.1c2e4aa4.js";const q=e("h2",null,"\u96A7\u9053\u76F8\u5173",-1),ee=e("p",null,[e("a",{href:"https://forum.laecloud.com/d/5-ying-she-ji-chu-jiao-xue-ji-chu-zhong-de-ji-chu-chu-xue-zhe-xian-ding",target:"_blank"},"\u5982\u679C\u60A8\u662F\u7B2C\u4E00\u6B21\u4F7F\u7528\uFF0C\u8BF7\u52A1\u5FC5\u770B\u8FD9\u91CC\u3002")],-1),te={class:"mt-3"},oe={class:"btn-group",role:"group","aria-label":"\u521B\u5EFA\u6216\u6574\u5408\u96A7\u9053\u914D\u7F6E\u6587\u4EF6"},ae={class:"list-group mt-3"},le={class:"d-flex w-100 justify-content-between"},se={class:"mb-1 text-success"},re={class:"mb-1"},ne={key:0},ie=e("span",{class:"text-danger"},[e("i",{class:"bi bi-x-circle"}),d(" \xA0\u5DF2\u6682\u505C ")],-1),de=[ie],ue={key:1},ce=e("span",{class:"text-danger"},[e("i",{class:"bi bi-x-circle"}),d(" \xA0\u5DF2\u505C\u6B62 ")],-1),_e=[ce],pe={key:2,"data-bs-toggle":"tooltip","data-bs-placement":"right",title:"\u6309\u4F4F Shift \u6216 Ctrl \u6765\u6253\u5F00"},ve=["href"],me=e("i",{class:"bi bi-box-arrow-up-right text-decoration-none"},null,-1),fe={key:3},he={color:"primary",rel:"noreferrer",target:"_blank",class:"text-decoration-none"},ge={class:"modal fade",id:"createTunnelModel",tabindex:"-1","aria-labelledby":"createTunnelModel","aria-hidden":"true"},be={class:"modal-dialog"},ye={class:"modal-content"},xe={class:"modal-header"},ke=e("h5",{class:"modal-title"},"\u65B0\u5EFA\u96A7\u9053",-1),we={class:"modal-body"},Se={class:"form-floating mb-3"},Ce=e("label",{for:"floatingName"},"\u96A7\u9053\u540D\u79F0",-1),Te={class:"form-floating mb-3"},Pe=e("label",{for:"floatingName"},"\u672C\u5730 \u5730\u5740\u548C\u7AEF\u53E3",-1),Ve={class:"form-floating mb-3"},Ue=e("option",{value:"http"},"HTTP",-1),Me=e("option",{value:"https"},"HTTPS",-1),Ne=e("option",{value:"tcp"},"TCP",-1),je=e("option",{value:"udp"},"UDP",-1),De=[Ue,Me,Ne,je],He=e("label",{for:"floatingProtocol"},"\u534F\u8BAE",-1),Be={class:"form-floating mb-3"},ze=["value"],Ee=e("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 TCP \u534F\u8BAE\u7684\u8282\u70B9(\u56FD\u5185\u670D\u52A1\u5668\u4E25\u7981 TCP \u5EFA\u7AD9)",-1),Fe={class:"form-floating mb-3"},Ge=["value"],Le=e("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 HTTP \u534F\u8BAE\u7684\u8282\u70B9",-1),Oe={class:"form-floating mb-3"},$e=["value"],Ae=e("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 HTTPS \u534F\u8BAE\u7684\u8282\u70B9",-1),Je={class:"form-floating mb-3"},Re=["value"],Ie=e("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 UDP \u534F\u8BAE\u7684\u8282\u70B9",-1),Ke={class:"form-floating mb-3"},Qe=e("label",{for:"floatingDomain"},"\u7ED1\u5B9A\u57DF\u540D",-1),We={class:"form-check"},Xe=e("label",{class:"form-check-label",color:"primary",for:"createHttps"}," \u540C\u65F6\u521B\u5EFA HTTP(s) \u96A7\u9053 ",-1),Ye={class:"form-floating mb-3"},Ze=e("label",{for:"floatingPort"},"\u8FDC\u7A0B\u7AEF\u53E3",-1),qe={key:0},et={key:0,class:"text-danger ms-1"},tt={class:"d-none"},ot=["textContent"],at={key:2},lt=e("h3",null,"\u670D\u52A1\u5668\u4FE1\u606F",-1),st={key:0},rt={key:1},nt=e("p",null,[d(" \u5982\u679C\u60A8\u7EE7\u7EED\uFF0C\u5219\u4EE3\u8868\u540C\u610F\u4E86\u6211\u4EEC\u7684"),e("a",{target:"_blank",color:"primary",href:"https://forum.laecloud.com/d/6-jing-yuan-ying-she-shi-yong-tiao-kuan"},"\u4F7F\u7528\u6761\u6B3E")],-1),it={class:"modal-footer"},dt={data:()=>({drawer:null})},pt=Object.assign(dt,{__name:"Index",setup(ut){const M=v([]),w=v([]),h=v([]),H=v([]),B=v([]),z=v([]),E=v([]),N=v(!1),S=v(!1),F=v({}),u=v({name:null}),o=v({name:null,protocol:"http",local_address:"127.0.0.1:80",server_id:1,remote_port:null,custom_domain:null,create_https:!0,create_cdn:!1});function G(l){l=l||32;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",m=t.length,g="",V=0;V<l;V++)g+=t.charAt(Math.floor(Math.random()*m));return g}o.value.name=G(10),b.get("/modules/frp/hosts").then(l=>{w.value=l.data,F.value=O(l.data)}),b.get("/modules/frp/traffics").then(l=>{M.value=l.data});function $(){b.get("/modules/frp/servers").then(l=>{N.value=!1,h.value=l.data,o.server_id=h.value[0].id,H.value=h.value.filter(t=>t.allow_http==1),B.value=h.value.filter(t=>t.allow_https==1),z.value=h.value.filter(t=>t.allow_tcp==1),E.value=h.value.filter(t=>t.allow_udp==1)})}function A(){o.value.name=G(10)}function J(l){u.value=h.value.find(t=>t.id==l)}function L(){var g;const l=(g=o.value.remote_port)!=null?g:0,t=u.value.min_port,m=u.value.max_port;(l<t||l>m)&&(o.value.remote_port=Math.floor(Math.random()*(m-t+1)+t))}function O(l){var t=0,m;for(m in l)l.hasOwnProperty(m)&&t++;return t}function R(){O(w.value)<3?b.post("/modules/frp/hosts",o.value).then(l=>{(o.value.protocol=="https"||o.value.protocol=="http")&&(o.value.create_https&&(o.value.protocol=="http"?o.value.protocol="https":o.value.protocol=="https"&&(o.value.protocol="http")),o.value.name+=" - "+o.value.protocol,b.post("/modules/frp/hosts",o.value).then(t=>{b.get("/modules/frp/hosts").then(m=>{w.value=m.data})})),l.status==200||l.status==201?(b.get("/modules/frp/hosts").then(t=>{w.value=t.data}),N.value=!0):S.value=l.message}).catch((l,t)=>{S.value="\u65E0\u6CD5\u521B\u5EFA\u96A7\u9053\uFF0C\u4E5F\u53EF\u80FD\u662F\u8868\u5355\u6CA1\u6709\u586B\u5199\u5B8C\u6574\uFF0C\u6216\u8005\u670D\u52A1\u5668\u4E0D\u63A5\u53D7\u6B64\u7AEF\u53E3\uFF08\u7AEF\u53E3\u88AB\u5360\u7528\u6216\u8005\u4E0D\u5728\u8303\u56F4\u5185\uFF09"}):S.value="\u96A7\u9053\u6570\u91CF\u5DF2\u6EE1\u6216\u8FC7\u91CF\uFF0C\u65E0\u6CD5\u521B\u5EFA\u96A7\u9053"}return(l,t)=>{const m=f("v-app-bar-nav-icon"),g=f("v-toolbar-title"),V=f("v-app-bar"),I=f("v-navigation-drawer"),C=f("v-btn"),K=f("router-link"),Q=f("v-container"),W=f("v-main"),j=f("v-alert"),X=f("v-app");return s(),D(X,{id:"inspire"},{default:_(()=>[p(V,{color:"primary"},{default:_(()=>[p(m,{onClick:t[0]||(t[0]=a=>l.drawer=!l.drawer)}),p(g,null,{default:_(()=>[d("MirrorEdge Frp \u63A7\u5236\u9762\u677F")]),_:1})]),_:1}),p(I,{modelValue:l.drawer,"onUpdate:modelValue":t[1]||(t[1]=a=>l.drawer=a),"expand-on-hover":"",rail:"",permanent:""},{default:_(()=>[p(Z)]),_:1},8,["modelValue"]),p(W,null,{default:_(()=>[p(Q,null,{default:_(()=>[(s(),r(y,null,k(1,a=>(s(),r(y,{key:a},[q,ee,i(e("p",null," \u60A8\u5F53\u524D\u7684\u53EF\u62B5\u7528\u6D41\u91CF: "+n(M.value.free_traffic)+" GB ",513),[[x,M.value.free_traffic]]),e("p",null," \u5DF2\u521B\u5EFA\u96A7\u9053/\u96A7\u9053\u603B\u6570: "+n(F.value)+" / 3 ",1),e("div",null,[d("\u60F3\u8981\u66F4\u591A\u514D\u8D39\u96A7\u9053\uFF1F \u524D\u5F80"),p(C,{color:"primary",href:"https://dash.laecloud.com/modules/tunnels"},{default:_(()=>[d("\u83B1\u4E91\u63A7\u5236\u9762\u677F")]),_:1}),d(" \u521B\u5EFA ")]),e("div",te,[e("div",oe,[p(C,{type:"button",color:"primary",class:"btn btn-outline-primary","data-bs-toggle":"modal","data-bs-target":"#createTunnelModel",onClick:t[2]||(t[2]=function(){$(),A()})},{default:_(()=>[d(" \u521B\u5EFA\u96A7\u9053 ")]),_:1})])]),(s(!0),r(y,null,k(w.value,c=>(s(),r("div",ae,[p(K,{to:{name:"modules.tunnels.show",params:{id:c.id}},class:"list-group-item list-group-item-action shadow-sm rounded"},{default:_(()=>[e("div",le,[e("h5",se,[e("a",null,n(c.name),1),d("|"),e("a",null,n(c.id),1)]),e("small",null,n(new Date(c.updated_at).toLocaleString()),1)]),e("div",re,[c.status=="suspended"?(s(),r("span",ne,de)):c.status=="stopped"?(s(),r("span",ue,_e)):T("",!0),c.protocol=="http"||c.protocol=="https"?(s(),r("span",pe,[d("\u96A7\u9053\u5730\u5740: "),e("a",{color:"primary",rel:"noreferrer",target:"_blank",href:c.protocol+"://"+c.custom_domain,class:"text-decoration-none"},[d(n(c.protocol+"://"+c.custom_domain)+" ",1),me],8,ve)])):(s(),r("span",fe,[d("\u96A7\u9053\u5730\u5740:"),e("a",he,n(c.server.server_address+":"+c.remote_port),1)]))])]),_:2},1032,["to"])]))),256))],64))),64))]),_:1})]),_:1}),e("div",ge,[e("div",be,[e("div",ye,[e("div",xe,[ke,p(C,{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),e("div",we,[N.value?(s(),D(j,{key:0,type:"success",class:"alert alert-success",role:"alert"},{default:_(()=>[d(" \u96A7\u9053\u521B\u5EFA\u6210\u529F\u3002 ")]),_:1})):S.value?(s(),D(j,{key:1,type:"error",class:"alert alert-danger",role:"alert"},{default:_(()=>[d(n(S.value),1)]),_:1})):T("",!0),p(j,{color:"primary",type:"info"},{default:_(()=>[d(" \u4E3A\u4E86\u9632\u6B62\u96A7\u9053\u88AB\u6EE5\u7528\uFF0C\u6211\u4EEC\u4F1A\u4E0D\u5B9A\u671F\u68C0\u67E5\u6620\u5C04\u5185\u5BB9\u3002 ")]),_:1}),e("div",Se,[i(e("input",{class:"form-control",id:"floatingName",placeholder:"xxx","onUpdate:modelValue":t[3]||(t[3]=a=>o.value.name=a)},null,512),[[U,o.value.name]]),Ce]),e("div",Te,[i(e("input",{class:"form-control",id:"floatingName",placeholder:"xxx","onUpdate:modelValue":t[4]||(t[4]=a=>o.value.local_address=a)},null,512),[[U,o.value.local_address]]),Pe]),e("div",Ve,[i(e("select",{class:"form-control",id:"floatingProtocol","onUpdate:modelValue":t[5]||(t[5]=a=>o.value.protocol=a)},De,512),[[P,o.value.protocol]]),He]),i(e("div",Be,[i(e("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":t[6]||(t[6]=a=>o.value.server_id=a),onChange:L},[(s(!0),r(y,null,k(z.value,a=>(s(),r("option",{value:a.id},n(a.name),9,ze))),256))],544),[[P,o.value.server_id]]),Ee],512),[[x,o.value.protocol=="tcp"]]),i(e("div",Fe,[i(e("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":t[7]||(t[7]=a=>o.value.server_id=a)},[(s(!0),r(y,null,k(H.value,a=>(s(),r("option",{value:a.id},n(a.name),9,Ge))),256))],512),[[P,o.value.server_id]]),Le],512),[[x,o.value.protocol=="http"]]),i(e("div",Oe,[i(e("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":t[8]||(t[8]=a=>o.value.server_id=a)},[(s(!0),r(y,null,k(B.value,a=>(s(),r("option",{value:a.id},n(a.name),9,$e))),256))],512),[[P,o.value.server_id]]),Ae],512),[[x,o.value.protocol=="https"]]),i(e("div",Je,[i(e("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":t[9]||(t[9]=a=>o.value.server_id=a),onChange:L},[(s(!0),r(y,null,k(E.value,a=>(s(),r("option",{value:a.id},n(a.name),9,Re))),256))],544),[[P,o.value.server_id]]),Ie],512),[[x,o.value.protocol=="udp"]]),i(e("div",null,[e("div",Ke,[i(e("input",{class:"form-control",id:"floatingDomain",placeholder:"xxx","onUpdate:modelValue":t[10]||(t[10]=a=>o.value.custom_domain=a)},null,512),[[U,o.value.custom_domain]]),Qe]),e("div",We,[i(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=a=>o.value.create_https=a),id:"createHttps"},null,512),[[Y,o.value.create_https]]),Xe])],512),[[x,o.value.protocol=="http"||o.value.protocol=="https"]]),i(e("div",Ye,[i(e("input",{class:"form-control",id:"floatingPort",placeholder:"xxx","onUpdate:modelValue":t[12]||(t[12]=a=>o.value.remote_port=a)},null,512),[[U,o.value.remote_port]]),Ze,u.value?(s(),r("div",qe,[o.value.remote_port<u.value.min_port||o.value.remote_port>u.value.max_port?(s(),r("div",et," \u5F53\u524D\u7AEF\u53E3\u8303\u56F4\u4E0D\u6B63\u786E\u3002 ")):T("",!0)])):T("",!0)],512),[[x,o.value.protocol=="tcp"||o.value.protocol=="udp"]]),e("span",tt,[e("span",{textContent:n(J(o.value.server_id))},null,8,ot)]),u.value?(s(),r("div",at,[lt,e("p",null,"\u540D\u79F0: "+n(u.value.name),1),e("p",null," \u7AEF\u53E3\u8303\u56F4: "+n(u.value.min_port)+" - "+n(u.value.max_port),1),e("p",null," \u96A7\u9053\u6570\u91CF: "+n(u.value.tunnels)+"/"+n(u.value.max_tunnels),1),u.value.price_per_gb!==0?(s(),r("p",st," \u6B64\u8282\u70B9\u4E3A\u6536\u8D39\u8282\u70B9, \u6BCF GB \u6D41\u91CF\u4EF7\u683C\u4E3A "+n(u.value.price_per_gb)+" \u5143 ",1)):(s(),r("p",rt,"\u6B64\u8282\u70B9\u76EE\u524D\u4E0D\u6536\u53D6\u8D39\u7528"))])):T("",!0),nt]),e("div",it,[p(C,{color:"primary",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},{default:_(()=>[d(" \u53D6\u6D88 ")]),_:1}),p(C,{color:"primary",type:"button",class:"btn btn-primary",onClick:R},{default:_(()=>[d(" \u521B\u5EFA ")]),_:1})])])])])]),_:1})}}});export{pt as default};
