import{r as p,i as b,c as D,w as c,a as f,o as s,b as _,d,e as r,f as k,F as y,g as i,v as x,h as e,t as n,j as V,x as U,bs as T,bp as Y}from"./index.e27b5069.js";import{_ as Z}from"./list.ef28aafe.js";const q=e("h2",null,"\u96A7\u9053\u76F8\u5173",-1),ee=e("p",null,[e("a",{href:"https://forum.laecloud.com/d/5-ying-she-ji-chu-jiao-xue-ji-chu-zhong-de-ji-chu-chu-xue-zhe-xian-ding",target:"_blank"},"\u5982\u679C\u60A8\u662F\u7B2C\u4E00\u6B21\u4F7F\u7528\uFF0C\u8BF7\u52A1\u5FC5\u770B\u8FD9\u91CC\u3002")],-1),te={class:"mt-3"},oe={class:"btn-group",role:"group","aria-label":"\u521B\u5EFA\u6216\u6574\u5408\u96A7\u9053\u914D\u7F6E\u6587\u4EF6"},le={class:"list-group mt-3"},ae={class:"d-flex w-100 justify-content-between"},se={class:"mb-1 text-success"},re={class:"mb-1"},ne={key:0,"data-bs-toggle":"tooltip","data-bs-placement":"right",title:"\u6309\u4F4F Shift \u6216 Ctrl \u6765\u6253\u5F00"},ie=["href"],de=e("i",{class:"bi bi-box-arrow-up-right text-decoration-none"},null,-1),ue={key:1},ce={color:"primary",rel:"noreferrer",target:"_blank",class:"text-decoration-none"},_e={class:"modal fade",id:"createTunnelModel",tabindex:"-1","aria-labelledby":"createTunnelModel","aria-hidden":"true"},pe={class:"modal-dialog"},ve={class:"modal-content"},me={class:"modal-header"},fe=e("h5",{class:"modal-title"},"\u65B0\u5EFA\u96A7\u9053",-1),he={class:"modal-body"},ge={class:"form-floating mb-3"},be=e("label",{for:"floatingName"},"\u96A7\u9053\u540D\u79F0",-1),ye={class:"form-floating mb-3"},xe=e("label",{for:"floatingName"},"\u672C\u5730 \u5730\u5740\u548C\u7AEF\u53E3",-1),ke={class:"form-floating mb-3"},we=e("option",{value:"http"},"HTTP",-1),Se=e("option",{value:"https"},"HTTPS",-1),Ce=e("option",{value:"tcp"},"TCP",-1),Te=e("option",{value:"udp"},"UDP",-1),Pe=[we,Se,Ce,Te],Ve=e("label",{for:"floatingProtocol"},"\u534F\u8BAE",-1),Ue={class:"form-floating mb-3"},Me=["value"],Ne=e("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 TCP \u534F\u8BAE\u7684\u8282\u70B9(\u56FD\u5185\u670D\u52A1\u5668\u4E25\u7981 TCP \u5EFA\u7AD9)",-1),je={class:"form-floating mb-3"},De=["value"],He=e("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 HTTP \u534F\u8BAE\u7684\u8282\u70B9",-1),Be={class:"form-floating mb-3"},ze=["value"],Ee=e("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 HTTPS \u534F\u8BAE\u7684\u8282\u70B9",-1),Fe={class:"form-floating mb-3"},Ge=["value"],Le=e("label",{for:"floatingServer"},"\u9009\u62E9\u652F\u6301 UDP \u534F\u8BAE\u7684\u8282\u70B9",-1),Oe={class:"form-floating mb-3"},$e=e("label",{for:"floatingDomain"},"\u7ED1\u5B9A\u57DF\u540D",-1),Ae={class:"form-check"},Je=e("label",{class:"form-check-label",color:"primary",for:"createHttps"}," \u540C\u65F6\u521B\u5EFA HTTP(s) \u96A7\u9053 ",-1),Re={class:"form-floating mb-3"},Ie=e("label",{for:"floatingPort"},"\u8FDC\u7A0B\u7AEF\u53E3",-1),Ke={key:0},Qe={key:0,class:"text-danger ms-1"},We={class:"d-none"},Xe=["textContent"],Ye={key:2},Ze=e("h3",null,"\u670D\u52A1\u5668\u4FE1\u606F",-1),qe={key:0},et={key:1},tt=e("p",null,[d(" \u5982\u679C\u60A8\u7EE7\u7EED\uFF0C\u5219\u4EE3\u8868\u540C\u610F\u4E86\u6211\u4EEC\u7684"),e("a",{target:"_blank",color:"primary",href:"https://forum.laecloud.com/d/6-jing-yuan-ying-she-shi-yong-tiao-kuan"},"\u4F7F\u7528\u6761\u6B3E")],-1),ot={class:"modal-footer"},lt={data:()=>({drawer:null})},nt=Object.assign(lt,{__name:"Index",setup(at){const M=p([]),w=p([]),h=p([]),H=p([]),B=p([]),z=p([]),E=p([]),N=p(!1),S=p(!1);p({});const F=p({}),u=p({name:null}),o=p({name:null,protocol:"http",local_address:"127.0.0.1:80",server_id:1,remote_port:null,custom_domain:null,create_https:!0,create_cdn:!1});function G(a){a=a||32;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",m=t.length,g="",P=0;P<a;P++)g+=t.charAt(Math.floor(Math.random()*m));return g}o.value.name=G(10),b.get("/modules/frp/hosts").then(a=>{w.value=a.data,F.value=O(a.data)}),b.get("/modules/frp/traffics").then(a=>{M.value=a.data});function $(){b.get("/modules/frp/servers").then(a=>{N.value=!1,h.value=a.data,o.server_id=h.value[0].id,H.value=h.value.filter(t=>t.allow_http==1),B.value=h.value.filter(t=>t.allow_https==1),z.value=h.value.filter(t=>t.allow_tcp==1),E.value=h.value.filter(t=>t.allow_udp==1)})}function A(){o.value.name=G(10)}function J(a){u.value=h.value.find(t=>t.id==a)}function L(){var g;const a=(g=o.value.remote_port)!=null?g:0,t=u.value.min_port,m=u.value.max_port;(a<t||a>m)&&(o.value.remote_port=Math.floor(Math.random()*(m-t+1)+t))}function O(a){var t=0,m;for(m in a)a.hasOwnProperty(m)&&t++;return t}function R(){O(w.value)<3?b.post("/modules/frp/hosts",o.value).then(a=>{(o.value.protocol=="https"||o.value.protocol=="http")&&(o.value.create_https&&(o.value.protocol=="http"?o.value.protocol="https":o.value.protocol=="https"&&(o.value.protocol="http")),o.value.name+=" - "+o.value.protocol,b.post("/modules/frp/hosts",o.value).then(t=>{b.get("/modules/frp/hosts").then(m=>{w.value=m.data})})),a.status==200||a.status==201?(b.get("/modules/frp/hosts").then(t=>{w.value=t.data}),N.value=!0):S.value=a.message}).catch((a,t)=>{S.value="\u65E0\u6CD5\u521B\u5EFA\u96A7\u9053\uFF0C\u4E5F\u53EF\u80FD\u662F\u8868\u5355\u6CA1\u6709\u586B\u5199\u5B8C\u6574\uFF0C\u6216\u8005\u670D\u52A1\u5668\u4E0D\u63A5\u53D7\u6B64\u7AEF\u53E3\uFF08\u7AEF\u53E3\u88AB\u5360\u7528\u6216\u8005\u4E0D\u5728\u8303\u56F4\u5185\uFF09"}):S.value="\u96A7\u9053\u6570\u91CF\u5DF2\u6EE1\u6216\u8FC7\u91CF\uFF0C\u65E0\u6CD5\u521B\u5EFA\u96A7\u9053"}return(a,t)=>{const m=f("v-app-bar-nav-icon"),g=f("v-toolbar-title"),P=f("v-app-bar"),I=f("v-navigation-drawer"),C=f("v-btn"),K=f("router-link"),Q=f("v-container"),W=f("v-main"),j=f("v-alert"),X=f("v-app");return s(),D(X,{id:"inspire"},{default:c(()=>[_(P,{color:"primary"},{default:c(()=>[_(m,{onClick:t[0]||(t[0]=l=>a.drawer=!a.drawer)}),_(g,null,{default:c(()=>[d("MirrorEdge Frp \u63A7\u5236\u9762\u677F")]),_:1})]),_:1}),_(I,{modelValue:a.drawer,"onUpdate:modelValue":t[1]||(t[1]=l=>a.drawer=l),"expand-on-hover":"",rail:"",permanent:""},{default:c(()=>[_(Z)]),_:1},8,["modelValue"]),_(W,null,{default:c(()=>[_(Q,null,{default:c(()=>[(s(),r(y,null,k(1,l=>(s(),r(y,{key:l},[q,ee,i(e("p",null," \u60A8\u5F53\u524D\u7684\u53EF\u62B5\u7528\u6D41\u91CF: "+n(M.value.free_traffic)+" GB ",513),[[x,M.value.free_traffic]]),e("p",null," \u5DF2\u521B\u5EFA\u96A7\u9053/\u96A7\u9053\u603B\u6570: "+n(F.value)+" / 3 ",1),e("div",null,[d("\u60F3\u8981\u66F4\u591A\u514D\u8D39\u96A7\u9053\uFF1F \u524D\u5F80"),_(C,{color:"primary",href:"https://dash.laecloud.com/modules/tunnels"},{default:c(()=>[d("\u83B1\u4E91\u63A7\u5236\u9762\u677F")]),_:1}),d(" \u521B\u5EFA ")]),e("div",te,[e("div",oe,[_(C,{type:"button",color:"primary",class:"btn btn-outline-primary","data-bs-toggle":"modal","data-bs-target":"#createTunnelModel",onClick:t[2]||(t[2]=function(){$(),A()})},{default:c(()=>[d(" \u521B\u5EFA\u96A7\u9053 ")]),_:1})])]),(s(!0),r(y,null,k(w.value,v=>(s(),r("div",le,[_(K,{to:{name:"modules.tunnels.show",params:{id:v.id}},class:"list-group-item list-group-item-action shadow-sm rounded"},{default:c(()=>[e("div",ae,[e("h5",se,[e("a",null,n(v.name),1),d("|"),e("a",null,n(v.id),1)]),e("small",null,n(new Date(v.updated_at).toLocaleString()),1)]),e("p",re,[v.protocol=="http"||v.protocol=="https"?(s(),r("span",ne,[d("\u96A7\u9053\u5730\u5740: "),e("a",{color:"primary",rel:"noreferrer",target:"_blank",href:v.protocol+"://"+v.custom_domain,class:"text-decoration-none"},[d(n(v.protocol+"://"+v.custom_domain)+" ",1),de],8,ie)])):(s(),r("span",ue,[d("\u96A7\u9053\u5730\u5740:"),e("a",ce,n(v.server.server_address+":"+v.remote_port),1)]))])]),_:2},1032,["to"])]))),256))],64))),64))]),_:1})]),_:1}),e("div",_e,[e("div",pe,[e("div",ve,[e("div",me,[fe,_(C,{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),e("div",he,[N.value?(s(),D(j,{key:0,type:"success",class:"alert alert-success",role:"alert"},{default:c(()=>[d(" \u96A7\u9053\u521B\u5EFA\u6210\u529F\u3002 ")]),_:1})):S.value?(s(),D(j,{key:1,type:"error",class:"alert alert-danger",role:"alert"},{default:c(()=>[d(n(S.value),1)]),_:1})):V("",!0),_(j,{color:"primary",type:"info"},{default:c(()=>[d(" \u4E3A\u4E86\u9632\u6B62\u96A7\u9053\u88AB\u6EE5\u7528\uFF0C\u6211\u4EEC\u4F1A\u4E0D\u5B9A\u671F\u68C0\u67E5\u6620\u5C04\u5185\u5BB9\u3002 ")]),_:1}),e("div",ge,[i(e("input",{class:"form-control",id:"floatingName",placeholder:"xxx","onUpdate:modelValue":t[3]||(t[3]=l=>o.value.name=l)},null,512),[[U,o.value.name]]),be]),e("div",ye,[i(e("input",{class:"form-control",id:"floatingName",placeholder:"xxx","onUpdate:modelValue":t[4]||(t[4]=l=>o.value.local_address=l)},null,512),[[U,o.value.local_address]]),xe]),e("div",ke,[i(e("select",{class:"form-control",id:"floatingProtocol","onUpdate:modelValue":t[5]||(t[5]=l=>o.value.protocol=l)},Pe,512),[[T,o.value.protocol]]),Ve]),i(e("div",Ue,[i(e("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":t[6]||(t[6]=l=>o.value.server_id=l),onChange:L},[(s(!0),r(y,null,k(z.value,l=>(s(),r("option",{value:l.id},n(l.name),9,Me))),256))],544),[[T,o.value.server_id]]),Ne],512),[[x,o.value.protocol=="tcp"]]),i(e("div",je,[i(e("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":t[7]||(t[7]=l=>o.value.server_id=l)},[(s(!0),r(y,null,k(H.value,l=>(s(),r("option",{value:l.id},n(l.name),9,De))),256))],512),[[T,o.value.server_id]]),He],512),[[x,o.value.protocol=="http"]]),i(e("div",Be,[i(e("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":t[8]||(t[8]=l=>o.value.server_id=l)},[(s(!0),r(y,null,k(B.value,l=>(s(),r("option",{value:l.id},n(l.name),9,ze))),256))],512),[[T,o.value.server_id]]),Ee],512),[[x,o.value.protocol=="https"]]),i(e("div",Fe,[i(e("select",{class:"form-control",id:"floatingServer","onUpdate:modelValue":t[9]||(t[9]=l=>o.value.server_id=l),onChange:L},[(s(!0),r(y,null,k(E.value,l=>(s(),r("option",{value:l.id},n(l.name),9,Ge))),256))],544),[[T,o.value.server_id]]),Le],512),[[x,o.value.protocol=="udp"]]),i(e("div",null,[e("div",Oe,[i(e("input",{class:"form-control",id:"floatingDomain",placeholder:"xxx","onUpdate:modelValue":t[10]||(t[10]=l=>o.value.custom_domain=l)},null,512),[[U,o.value.custom_domain]]),$e]),e("div",Ae,[i(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=l=>o.value.create_https=l),id:"createHttps"},null,512),[[Y,o.value.create_https]]),Je])],512),[[x,o.value.protocol=="http"||o.value.protocol=="https"]]),i(e("div",Re,[i(e("input",{class:"form-control",id:"floatingPort",placeholder:"xxx","onUpdate:modelValue":t[12]||(t[12]=l=>o.value.remote_port=l)},null,512),[[U,o.value.remote_port]]),Ie,u.value?(s(),r("div",Ke,[o.value.remote_port<u.value.min_port||o.value.remote_port>u.value.max_port?(s(),r("div",Qe," \u5F53\u524D\u7AEF\u53E3\u8303\u56F4\u4E0D\u6B63\u786E\u3002 ")):V("",!0)])):V("",!0)],512),[[x,o.value.protocol=="tcp"||o.value.protocol=="udp"]]),e("span",We,[e("span",{textContent:n(J(o.value.server_id))},null,8,Xe)]),u.value?(s(),r("div",Ye,[Ze,e("p",null,"\u540D\u79F0: "+n(u.value.name),1),e("p",null," \u7AEF\u53E3\u8303\u56F4: "+n(u.value.min_port)+" - "+n(u.value.max_port),1),e("p",null," \u96A7\u9053\u6570\u91CF: "+n(u.value.tunnels)+"/"+n(u.value.max_tunnels),1),u.value.price_per_gb!==0?(s(),r("p",qe," \u6B64\u8282\u70B9\u4E3A\u6536\u8D39\u8282\u70B9, \u6BCF GB \u6D41\u91CF\u4EF7\u683C\u4E3A "+n(u.value.price_per_gb)+" \u5143 ",1)):(s(),r("p",et,"\u6B64\u8282\u70B9\u76EE\u524D\u4E0D\u6536\u53D6\u8D39\u7528"))])):V("",!0),tt]),e("div",ot,[_(C,{color:"primary",type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},{default:c(()=>[d(" \u53D6\u6D88 ")]),_:1}),_(C,{color:"primary",type:"button",class:"btn btn-primary",onClick:R},{default:c(()=>[d(" \u521B\u5EFA ")]),_:1})])])])])]),_:1})}}});export{nt as default};
